<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>EatBits</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
    <style>
      .error {
        background: #fcc;
        border: 2px solid #c99;
      }
      .btn:active {
        outline-color: #08818d;
      }
      btn:active {
        color:#08818d;
      }
  </style>
  </head>
  
  <body>
    <header class="text-white" style="background-color: rgba(0, 0, 0, 0.816);">
      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand text-white" href="/">

            <img src="/images/icon.jpg" alt="" width="30" height="24" class="d-inline-block align-text-top">
  
            <b>EatBits</b>
  
          </a>
        </div>
      </nav>
    </header>

    <div class="container">
        <div class="py-5 text-center">
            <h2>Sign Up to enter our Culinary world.....</h2>
            <p class="lead">Fill in details of yourself and your children so that you can have better personalized experience.</p>
        </div>


        <div class="row g-5">
            <div class="col-md col-lg">
              <h4 class="mb-3">Account Details</h4>
              <form id="creationform" action = '/register' method = "POST">
                <div class="row g-3">
                    <div class="col-sm-6">
                        <label for="firstName" class="form-label">First name</label>
                        <input type="text" class="form-control" name="firstName" id="firstName" placeholder="Maria" value="" required>
                    </div>
      
                    <div class="col-sm-6">
                        <label for="lastName" class="form-label">Last name</label>
                        <input type="text" class="form-control" name="lastName" id="lastName" placeholder="Smith" value="" required>
                    </div>
        
                    <div class="col-12">
                        <label for="email" class="form-label">Email </label>
                        <input type="email" class="form-control" name="email" id="email" placeholder="you@example.com" value="" required>
                    </div>

                    <div class="col-12">
                        <label for="password" class="form-label">Password:</label>
                        <input type="password" name="pwd" id="pwd" class="form-control" placeholder="Password" required>
                    </div>

                    <div class="col-12">
                        <label for="password" class="form-label">Confirm Password:</label>
                        <input type="password" name="confirmpwd" id="confirmpwd" class="form-control" placeholder="Retype the above password" required>
                    </div>

                </div>
      
                <hr class="my-4">
      
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="t&c" checked id="agree">
                    <label class="form-check-label" for="same-address">I agree to the terms and conditions.</label>
                </div>
      
                <hr class="my-4">
                <div class="row">
                    <div class="col">
                        <button class="w-100 btn btn-lg text-white" type="submit" style="background-color: #08818d;">CREATE ACCOUNT</button>
                    </div>
                    <div class="col">
                        <button type="button" class="w-100 btn btn-lg text-white" style="background-color: #08818d;" onclick="location.href='/';">Cancel</button>
                    </div>
                    <hr class="my-4">
                </div>
                <br><br>
              </form>
            </div>
          </div>
    </div>

    <footer class="text-center text-white" style="background-color: rgba(0, 0, 0, 0.816);">
        <!-- Grid container -->
        <div class="container pt-4">
          <!-- Section: Social media -->
          <section class="mb-4">
            <!-- Twitter -->
            <a
              class="btn btn-link btn-floating btn-lg text-light m-1"
              href="#!"
              role="button"
              data-mdb-ripple-color="light"
              ><i class="bi bi-twitter"></i></a>
        
            <!-- Google -->
            <a
              class="btn btn-link btn-floating btn-lg text-light m-1"
              href="#!"
              role="button"
              data-mdb-ripple-color="light"
              ><i class="bi bi-google"></i></a>
        
            <!-- Instagram -->
            <a
              class="btn btn-link btn-floating btn-lg text-light m-1"
              href="#!"
              role="button"
              data-mdb-ripple-color="light"
              ><i class="bi bi-instagram"></i></a>
        
            <!-- Linkedin -->
            <a
              class="btn btn-link btn-floating btn-lg text-light m-1"
              href="#!"
              role="button"
              data-mdb-ripple-color="light"
              ><i class="bi bi-linkedin"></i></a>
            <!-- Github -->
            <a
              class="btn btn-link btn-floating btn-lg text-light m-1"
              href="#!"
              role="button"
              data-mdb-ripple-color="light"
              ><i class="bi bi-github"></i></a>
          </section>
          <!-- Section: Social media -->
        </div>
        <!-- Grid container -->
        
        <!-- Copyright -->
        <div class="text-center text-light p-3">
          Â© 2022 Copyright:
          <a class="text-light" href="https://mdbootstrap.com/">Team-14EatBits.com</a>
        </div>
        <!-- Copyright -->
    </footer>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script>
          window.onload = function(){
              var email = document.getElementById("email");
              var span1 = document.createElement("span");

              var pwd = document.getElementById("pwd");
              var span2 = document.createElement("span");

              var confirm = document.getElementById("confirmpwd");
              var span3 = document.createElement("span");

              email.onfocus = function(){
              span1.innerHTML = "Email should be of the format abc@def.xyz";
              span1.style.display = "block";
              email.parentNode.appendChild(span1);
              email.classList.remove('error');
              }

              email.onblur = function(){
              span1.style.display = "none";
              email.parentNode.appendChild(span1);
              }

              pwd.onfocus = function(){
              span2.innerHTML = "Password should contain at least 6 characters, one uppercase letter, one number and one special character (!,@,#,$,%,^,&,*,+)";
              span2.style.display = "block";
              pwd.parentNode.appendChild(span2);
              pwd.classList.remove('error');
              }

              pwd.onblur = function(){
              span2.style.display = "none";
              pwd.parentNode.appendChild(span2);
              }

              confirm.onfocus = function(){
              span3.innerHTML = "Password and confirm password fields should match";
              span3.style.display = "block";
              confirm.parentNode.appendChild(span3);
              confirm.classList.remove('error');
              }

              confirm.onblur = function(){
              span3.style.display = "none";
              confirm.parentNode.appendChild(span3);
              }

              const isEmailValid = (emailID) => {
              const emailPattern = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              if(!emailPattern.test(emailID)){
              email.classList.add('error');
              span1.innerHTML = "Error: Email ID is not valid";
              span1.style.display = "block";
              }
              return emailPattern.test(emailID);
              };

              const isPasswordValid = (password) => {
              const passwordPattern = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*\+])(?=.{6,})");
              if(!passwordPattern.test(password)){
              pwd.classList.add('error');
              span2.innerHTML = "Error: You should enter at least 6 characters, one uppercase letter, one number and one special character (!,@,#,$,%,^,&,*,+)";
              span2.style.display = "block";
              }
              return passwordPattern.test(password);
              };

              const isConfirmPwdSameAsPwd = (password, confirmPassword) => {
              if(!(password==confirmPassword)){
              confirm.classList.add('error');
              pwd.classList.add('error');
              span3.innerHTML = "Error: Passwords do not match";
              span3.style.display = "block";
              }
              return (password==confirmPassword);
              };

              var form = document.getElementById("creationform");
              form.onsubmit = function(e){

              var emailVal = email.value;
              var passwordVal = pwd.value;
              var confirmVal = confirm.value;

              let emailValid = isEmailValid(emailVal);
              let passwordValid = isPasswordValid(passwordVal);
              let confirmPwdValid = isConfirmPwdSameAsPwd(passwordVal, confirmVal);

              if(!(emailValid & passwordValid & confirmPwdValid)){ 
              e.preventDefault();
              }

              }
              }
        </script>
    </body>
</html>      