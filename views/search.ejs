<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search a List</title>
   
     <!-- CSS only -->
    

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
 
         integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
 
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
     <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
 
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
  
      

  <!--External Links-->

  <link rel="stylesheet" href="/stylesheets/styleSearch.css">

</head>
<body>
      <!--NavBar-->
      <nav class="navbar navbar-expand-lg navbar-light static-top custom-navbar text-white"
      style="background-color: rgba(0, 0, 0, 0.816);">
      <div class="container-fluid">
        <a class="navbar-brand text-white" href="/dashboard">
  
          <img src="/images/icon.jpg" alt="" width="30" height="24" class="d-inline-block align-text-top">
  
          <b>EatBits</b>
  
        </a>
        <button class="navbar-toggler" type="button" height="16" width="16" data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
     
            
        <span style="padding-left: 85%; padding-top: 0.5%;"><h5> <%= user.firstname %> </h5></span>
        <div class="dropdown dropstart">
          <a class="btn btn-secondary" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
            aria-expanded="false">
            <i class="bi bi-person-fill"></i>
          </a>
  
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <li><a class="dropdown-item" href="#">Your Preference Reports</a></li>
            <li><a class="dropdown-item" href="#">Your Favourites</a></li>
            <li><a class="dropdown-item" href="#">Upgrade</a></li>
          </ul>
        </div>
  
  
      </div>
    </nav>

    <!--SearchBar-->

  <!--sidemenu>-->
  <div class="wrapper">

    <!-- Sidebar -->
    <div class="col-lg-2 col-md-3 px-sm-2 px-md-0 py-1 custom-navbar-sidemenu">
        <div class="d-flex flex-column  align-items-left align-items-sm-start side-menu-list">
          
          <ul class="nav nav-pills flex-column align-items-sm-left px-3 side-menu-list1" id="menu">

            <li>
                <a href="/search" data-bs-toggle="collapse" class="nav-link px-0 align-left " style="padding-top:40px">
                   <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-search-heart-fill"></i> Recipes</span></i></a>
               
              </li>
            
            
            <li>
              <a href="/foodReport" data-bs-toggle="collapse" class="nav-link px-0 align-left ">
                 <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-file-bar-graph-fill"></i> Preference Report</span></a>
            
            </li>
            <li>
              <a href="#submenu4" data-bs-toggle="collapse" class="nav-link px-0 align-left">
             <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-chat-right-text"></i>  Get Expert Advice</span>
              </a>
             
            </li>
          
        
          </ul>

        

        </div>

        <div class="d-flex flex-column  align-items-left align-items-sm-start side-menu-list">
          
            <ul class="nav nav-pills flex-column align-items-sm-left px-3 side-menu-list1" id="menu">
              <li>
                <a href="#" class="nav-link align-start px-0" style="padding-top:40px">
                   <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-egg-fill"></i> Food
                    </span>
                </a>
              </li>
            
              <li>
                <a href="#submenu5" data-bs-toggle="collapse" class="nav-link px-0 align-left ">
                   <span class="ms-1 sidemenu-buttons side-menu "><i class="bi bi-bell-fill"></i> Quiz</span></i></a>
               
              </li>
              <li>
                <a href="#submenu6" data-bs-toggle="collapse" class="nav-link px-0 align-left">
               <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-pin-map-fill"></i> Cuisine</span>
                </a>
               
              </li>
            
             
             
            </ul>

          

          </div>

        <!--Extra profile Options-->

        <div class="d-flex flex-column  align-items-left align-items-sm-start side-menu-list">
          
            <ul class="nav nav-pills flex-column align-items-sm-left px-3 side-menu-list1" id="menu">
              <li>
                <a href="/profile" class="nav-link align-start px-0" style="padding-top:40px">
                   <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-gear"></i> Your Account Settings
                    </span>
                </a>
              </li>
            
              <li>
                <a href="#submenu6" data-bs-toggle="collapse" class="nav-link px-0 align-left">
               <span class="ms-1 sidemenu-buttons side-menu"><i class="bi bi-person"></i>  Sign Out</span>
                </a>
               
              </li>
            
             
             
            </ul>

          

          </div>


      </div>    



    <!-- Page Content -->
    <div id="content">
        <!-- We'll fill this with dummy content -->
        <div class="search-wrapper">
            <h1>Search Recipes</h1>
            <div class="searchWrapper">
              <form class="form-inline">
              
                <div class="form-group mx-sm-3 mb-2" id="search-books">
                  <label for="search" class="sr-only">Search Recipes</label>
                  <input type="text" name="search"  id="search">
                </div>
                <button name="search_btn" id="searchSubmit" type="submit" class="btn btn-primary mb-2">Search</button>
                &nbsp;
                
                
                <button name="reset" type="reset" id="reset" class="btn btn-primary mb-2" >Reset</button>
              </form>
          
              <label for="sorting" id="sortingLabel">Sort By:</label>
    
          <select id="sorting" onchange="sortingResults({filteredList});">
            <option value="Alphabetically">Alphabetically</option>
            <option value="Rating">User Ratings</option>
            <option value="CookingTime">Cooking Time</option>
          </select>  
            </div>
        </div>

        <!--cards-->

        
      
        <div class="recipe-cards" id ="MainContent" data-recipe-cards-container>
    
        </div>
     
    
  </div>
  </div>





<!--Footer-->

<footer class="text-center text-white" style="background-color: rgba(0, 0, 0, 0.816);">
    <!-- Grid container -->
    <div class="container pt-4">
      <!-- Section: Social media -->
      <section class="mb-4">
        <!-- Twitter -->
        <a class="btn btn-link btn-floating btn-lg text-light m-1" href="#!" role="button"
          data-mdb-ripple-color="light"><i class="bi bi-twitter"></i></a>

        <!-- Google -->
        <a class="btn btn-link btn-floating btn-lg text-light m-1" href="#!" role="button"
          data-mdb-ripple-color="light"><i class="bi bi-google"></i></a>

        <!-- Instagram -->
        <a class="btn btn-link btn-floating btn-lg text-light m-1" href="#!" role="button"
          data-mdb-ripple-color="light"><i class="bi bi-instagram"></i></a>

        <!-- Linkedin -->
        <a class="btn btn-link btn-floating btn-lg text-light m-1" href="#!" role="button"
          data-mdb-ripple-color="light"><i class="bi bi-linkedin"></i></a>
        <!-- Github -->
        <a class="btn btn-link btn-floating btn-lg text-light m-1" href="#!" role="button"
          data-mdb-ripple-color="light"><i class="bi bi-github"></i></a>
      </section>
      <!-- Section: Social media -->
    </div>
    <!-- Grid container -->

    <!-- Copyright -->
    <div class="text-center text-light p-3">
      © 2022 Copyright:
      <a class="text-light" href="https://mdbootstrap.com/">Team-14EatBits.com</a>
    </div>
    <!-- Copyright -->
  </footer>
  
    
</body>

<script>
   
   var recipes= [
    {
        "Name": "Broccoli Apple Salad",
        "Url": "https://www.cookingclassy.com/broccoli-apple-salad/",
        "Description": "This delicious Broccoli Apple Salad is one of the best ways you can enjoy fresh broccoli! It's packed with nutritious ingredients and sure to be a crowd pleaser, everyone will love this lighter dressing! ",
        "Rating": 9,
        "CookingTime": 20,
        "WithKids": "One of the reasons we love this salad is that it presents broccoli to kids in a new way: shredded! Most produce departments sell broccoli slaw now (Trader Joe’s has a really tasty bagged broccoli slaw.) So you should be able to find it at your local supermarket.",
        "WithOutKids": [
            "In a medium mixing bowl whisk together Greek yogurt, mayonnaise, vinegar, honey and season with salt to taste (about 1/4 tsp). Chill until ready to use.",
            "In a salad bowl toss together broccoli, apples, walnuts, carrots, raisins or cranberries and red onion. Pour in dressing and toss until evenly coated"
        ],
        "Ingredients": [
            "raw broccoli",
            "onions",
            "walnuts",
            "golden raisins",
            "cranberries",
            "carrots"
        ]
    },
    {
        "Name": "Blueberry Spinach Smoothie",
        "Url": "https://thenaturalnurturer.com/blueberry-spinach-smoothie/",
        "Description": "This Blueberry Spinach Smoothie is the perfect no-cook, healthy breakfast any day of the week. Delicious and easy to make, it is a great way to get fruits and greens into your day right off the bat!",
        "Rating": 6,
        "CookingTime": 15,
        "WithKids": "Spinach is a mild-tasting leafy green making it a great way to hide a serving of veggies.",
        "WithOutKids": [
            "Gather all smoothie ingredients",
            "Combine spinach, milk and yogurt in your blender. Blend until smooth and there are not bits of spinach left.",
            "Add remaining ingredients and blend again.",
            "Taste. Add extra milk or some water if a thinner consistency is desired.",
            "Enjoy immediately."
        ],
        "Ingredients": [
            "blueberries",
            "creamy protein-rich Greek yogurt",
            "sweet bananas",
            "handful of spinach"
        ]
    },
    {
        "Name": "Strawberry Mango Smoothie",
        "Url": "https://www.wellplated.com/strawberry-mango-smoothie/",
        "Description": "Together, strawberries and mangos taste like straight-up paradise. Sipping this smoothie makes me dream of the beach.",
        "Rating": 8,
        "CookingTime": 10,
        "WithKids": "Add all the ingredients to a blender, and blend until smooth. ENJOY!",
        "WithOutKids": [
            "Add all the ingredients to a blender, and blend until smooth. ENJOY!"
        ],
        "Ingredients": [
            "Strawberry",
            "Mango",
            "Carrots",
            "Almond Milk",
            "Lemon Juice"
        ]
    },
    {
        "Name": "Vegan One Pot Pasta with Spinach, Tomatoes and Broccoli",
        "url": "https://www.fromthecomfortofmybowl.com/vegan-one-pot-pasta-spinach-tomatoes-broccoli/",
        "Description": "This vegan one pot pasta is such a time-saver. It's creamy, flavorful and made without adding oil.",
        "Rating": 6,
        "CookingTime": 45,
        "WithKids": "To the pot of cooked pasta and broccoli, add the spinach, sauce, mascarpone, and half the reserved cooking water. Cook on medium-high, stirring constantly, 1 to 2 minutes, or until coated (if necessary, gradually add the remaining cooking water to ensure the pasta is thoroughly coated). Turn off the heat. Taste, then season with salt and chilli if desired. Serve the finished pasta garnished with the parmesan. Enjoy!",
        "WithOutKids": [
            "To the pot of cooked pasta and broccoli, add the spinach, sauce, mascarpone, and half the reserved cooking water.",
            " Cook on medium-high, stirring constantly, 1 to 2 minutes, or until coated (if necessary, gradually add the remaining cooking water to ensure the pasta is thoroughly coated).",
            " Turn off the heat. Taste, then season with salt and chilli if desired. Serve the finished pasta garnished with the parmesan. Enjoy!"
        ],
        "Ingredients": [
            "6 oz Ditali Pasta",
            "5 oz Baby Spinach",
            "½ lb Broccoli",
            "2 cloves Garlic",
            "1 Tbsp Capers",
            "1 Shallot",
            "1½ tsps Calabrian Chile Paste",
            "¼ cup Grated Parmesan Cheese",
            "2 Tbsps Tomato Paste"
        ]
    },
    {
        "Name": "Capsicum Tomato Sandwich",
        "Url": "https://blogexplore.com/food/breakfast/capsicum-tomato-sandwich/",
        "Description": "This capsicum tomato sandwich is an easy and delicious sandwich perfect for breakfast. This sandwich has a filling comprising of capsicums or bellpeppers, tomatoes and onions and lightly spiced. It is easy to make and a filling breakfast or snack.",
        "Rating": 7.5,
        "CookingTime": 30,
        "WithKids": "with kids Descriptionhere",
        "WithOutKids": [
            "Finely chop the onions, tomatoes and capsicums.",
            "Heat oil in a pan. Add the chopped onions. Fry till the onions become translucent.",
            "Then add the chopped ripe tomato along with salt. Cover and cook on low heat for around 2 mins till the tomatoes become soft and slightly mashed.",
            "Add the chopped capsicums.",
            "Again cover and cook for a couple of minutes or till the capsicums become slightly soft.",
            "Finally add the garam masala powder and black chilli powder. Fry on high heat for a minute. Remove from heat and set this aside to slightly cool down",
            "Meanwhile apply butter to one side of the bread slices.",
            "Alternatively, use a sandwich maker to fill the bread slices with the capsicum-tomato mixture and toast them"
        ],
        "Ingredients": [
            "6 bread slices",
            "11 onion small (or 1/2 cup finely chopped onions)",
            "1 ripe tomato large (or 3/4 cup finely chopped tomatoes)",
            "3 small caspicums (or1 cup finely chopped capsicums / bell pepper)",
            "1/2 tsp black chilli powder",
            "1/4 tsp garam masala powder",
            "Butter or oil for toasting bread",
            "Salt to taste",
            "2 tsp oil"
        ]
    },
    
    {
        "Name": "Spinach Tomato Burgers",
        "Url": "https://www.tasteofhome.com/recipes/spinach-tomato-burgers/",
        "Description": "A nutty winter salad which is superhealthy, quick to prepare and finished with a light maple syrup dressing",
        "Rating": 8,
        "CookingTime": 35,
        "WithKids": "1 burger: 389 calories, 17g fat (6g saturated fat), 125mg cholesterol, 737mg sodium, 29g carbohydrate (7g sugars, 4g fiber), 29g protein. Diabetic Exchanges: 3 lean meat, 2 starch, 1-1/2 fat.",
        "WithOutKids": [
            "Combine first 6 ingredients. Add beef; mix lightly but thoroughly. Shape into four 1/2-in.-thick patties.",
            "Place burgers on an oiled grill rack or in a greased 15x10x1-in. pan. Grill, covered, over medium heat or broil 4-5 in. from heat until a thermometer reads 160°, 4-5 minutes per side. Grill buns, cut side down, over medium heat until toasted. Serve burgers on buns; top with spinach dip, tomatoes and lettuce."
        ],
        "Ingredients": [
            "1 large egg, lightly beaten",
            "2 tablespoons fat-free milk",
            "1/2 cup soft bread crumbs",
            "1 teaspoon dried basil",
            "1/2 teaspoon salt",
            "1/4 teaspoon chilli",
            "1 pound lean ground beef",
            "1/4 cup julienned soft sun-dried tomatoes",
            "1/4 cup spinach dip"
        ]
    },
    {
        "Name": "Spiced Potatoes and Spinach fries",
        "Url": "https://www.foodnetwork.com/recipes/danny-boome/spiced-potatoes-and-spinach-recipe-1941639",
        "Description": "A simple and delicious side dish, spinach, onion and garlic is perfect served over rice. Ready in under 20 minutes, this vegan, plant-based, oil-free recipe is great for a weeknight meal.",
        "Rating": 7,
        "CookingTime": 60,
        "WithKids": "1 burger: 389 calories, 17g fat (6g saturated fat), 125mg cholesterol, 737mg sodium, 29g carbohydrate (7g sugars, 4g fiber), 29g protein. Diabetic Exchanges: 3 lean meat, 2 starch, 1-1/2 fat.",
        "WithOutKids": ["In a large pot, cover the potatoes with cold water, add some salt then bring to a simmer. Cook, uncovered, until tender when pierced with a knife, about 20 minutes. Drain the potatoes.","Melt the butter in a large skillet over medium heat. Add the garlic and the onion and cook until the onion has softened, about 2 minutes. Add the potatoes. Stir in the curry powder, then add the spinach and tomato. Cook and stir until the spinach has wilted and all the flavors have merged together, about 2 more minutes. Serve warm."],
            
        "Ingredients": [
            "2 pounds Yukon gold potatoes, quartered",
            "Pinch salt, for water",
            "1 tablespoon butter",
            "2 cloves garlic, minced",
            "1 small onion, halved and thinly sliced",
            "1 teaspoon curry powder",
            "4 cups baby spinach",
            "1 large tomato, diced"
        ]
    }
]
let filteredList =[]
let results=[]



var render = function(data) {
  const mainContainer = document.getElementById("MainContent");
  results=[];
    console.log(data)
    mainContainer.innerHTML="";
   
    data.map(recipe => {
      
      const card = document.createElement('div');
      card.classList = 'card-body';
    
    const results=`  <div class="container-fluid">
    
    <div class="card w-75 mb-4 ml-5">
      <div class="card-header" data-header>
        <h2>${recipe.Name}</h2>
      </div>
      <div class="card-body">
        <h5 class="card-title" data-title> <b>Ingredients: </b>${recipe.Ingredients}</h5>
        <p class="card-text" data-body><i class="bi bi-star-fill"></i> <b> Avg User Rating: </b> ${recipe.Rating}</p>
        <p class="card-text" data-body><b> Cootking Time: </b> ${recipe.CookingTime} mins</p>
        <a href="#" class="btn btn-primary">View recipe</a>
      </div>
    </div>
  </div>`;


  mainContainer.innerHTML+=results;
  })
 
}



/*Search functionality*/

var handleSearch = function(event) {
    event.preventDefault();
    // Get the search terms from the input field
    var searchTerm = event.target.elements['search'].value;
    // Tokenize the search terms and remove empty spaces
    var tokens = searchTerm
                  .toLowerCase()
                  .split(' ')
                  .filter(function(token){
                    return token.trim() !== '';
                  });
   if(tokens.length) {
    //  Create a regular expression of all the search terms
    var searchTermRegex = new RegExp(tokens.join('|'), 'gim');
    filteredList =[];
      filteredList = recipes.filter(function(recipe){
      // Create a string of all object values
      var recipeString = '';
      for(var key in recipe) {
       
        if(recipe.hasOwnProperty(key) && recipe[key] !== '') {
          recipeString += recipe[key].toString().toLowerCase().trim() + ' ';
        }
      }
    
      
      // Return recipe objects where a match with the search regex if found
      return recipeString.match(searchTermRegex);
    });

    console.log(filteredList)


    // Render the search results
    render(filteredList);
  

   }
 
  };
 

  /*Sorting functionality*/

   function sortingResults({filteredList}){

    
    var selectBox = document.getElementById("sorting");
    var selectedValue = selectBox.options[selectBox.selectedIndex].value;
   
    
    if(selectedValue == "Alphabetically"){
      filteredList=filteredList.sort((a,b)=>{
      if (a.Name.toLowerCase()<b.Name.toLowerCase()){
        return -1
      }
      if(a.Name.toLowerCase()>b.Name.toLowerCase()){
        return 1
      }
      return 0
    })}
    else if(selectedValue=="Rating"){
      filteredList=filteredList.sort((a,b)=>{
        if (a.Rating>b.Rating){
        return -1
      }
      if(a.Rating<b.Rating){
        return 1
      }
    
      return 0
      })
    
     
    }
    else if(selectedValue=="CookingTime"){
      filteredList=filteredList.sort((a,b)=>{
        if (a.CookingTime<b.CookingTime){
        return -1
      }
      if(a.CookingTime>b.CookingTime){
        return 1
      }
    
      return 0
      })
    }

    
    
    render(filteredList)
    
  
  }

  document.addEventListener('submit', handleSearch);
  
  
  document.addEventListener('reset', function(event){
    
   
   
    
    render(recipes);
  })


  
  
 
  

 
  


</script>



</html>